<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kubu-Hai | Flutter Web Portal</title>

  <!-- Inline PWA manifest -->
  <link rel="manifest" href="data:application/manifest+json,{
    &quot;name&quot;:&quot;Kubu-Hai Web&quot;,
    &quot;short_name&quot;:&quot;KubuHai&quot;,
    &quot;description&quot;:&quot;Empowering Flutter Web with AI, Voice, and PWA Magic ‚ú®&quot;,
    &quot;start_url&quot;:&quot;./index.html&quot;,
    &quot;display&quot;:&quot;standalone&quot;,
    &quot;orientation&quot;:&quot;portrait&quot;,
    &quot;background_color&quot;:&quot;#0f0f0f&quot;,
    &quot;theme_color&quot;:&quot;#00d8ff&quot;,
    &quot;icons&quot;:[
      {&quot;src&quot;:&quot;icon-192.png&quot;,&quot;sizes&quot;:&quot;192x192&quot;,&quot;type&quot;:&quot;image/png&quot;},
      {&quot;src&quot;:&quot;icon-512.png&quot;,&quot;sizes&quot;:&quot;512x512&quot;,&quot;type&quot;:&quot;image/png&quot;},
      {&quot;src&quot;:&quot;icon-maskable.png&quot;,&quot;sizes&quot;:&quot;512x512&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;purpose&quot;:&quot;maskable&quot;}
    ]
  }">

  <meta name="theme-color" content="#121212">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Kubu-Hai" />
  <meta http-equiv="Content-Security-Policy" content="require-trusted-types-for 'script'">
  <link rel="icon" href="icon.png" />

  <script>var serviceWorkerVersion=null;</script>
  <script src="flutter.js" defer></script>

  <style>
    :root{--primary:#00d8ff;--secondary:#ff00c3;--bg-dark:#0f0f0f;--bg-light:#f4f4f4;--glass:rgba(255,255,255,0.15);--blur:14px}
    body{margin:0;font-family:"Inter",system-ui,sans-serif;background:var(--bg-dark);color:#fff;
         display:flex;align-items:center;justify-content:center;height:100vh;overflow:hidden;
         transition:background .4s,color .4s}
    body.light{background:var(--bg-light);color:#1a1a1a}
    .container{text-align:center;padding:50px;border-radius:20px;backdrop-filter:blur(var(--blur));
       background:var(--glass);box-shadow:0 8px 40px rgba(0,0,0,.35);width:90%;max-width:520px;animation:fadeIn 1s ease forwards}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .logo-orb{width:120px;height:120px;margin:0 auto 20px;border-radius:50%;
       background:radial-gradient(circle at 30% 30%,var(--primary),var(--secondary));
       box-shadow:0 0 20px var(--primary),0 0 40px var(--secondary);
       animation:glow 3s ease-in-out infinite alternate}
    @keyframes glow{from{box-shadow:0 0 20px var(--primary),0 0 40px var(--secondary)}
                    to{box-shadow:0 0 40px var(--primary),0 0 80px var(--secondary)}}
    .title{font-size:2rem;font-weight:800;background:linear-gradient(90deg,var(--primary),var(--secondary));
           -webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .subtitle{font-size:1rem;opacity:.8;margin-bottom:30px}
    .btn{background:none;border:1px solid var(--primary);color:var(--primary);
         border-radius:30px;padding:10px 22px;margin:5px;cursor:pointer;font-weight:600;transition:.3s}
    .btn:hover{background:var(--primary);color:#fff}
    body.light .btn{border-color:#333;color:#333}
    body.light .btn:hover{background:#333;color:#fff}
    .status{font-size:.9rem;margin-top:15px;opacity:.7}
    .loading-spinner{width:36px;height:36px;border:4px solid rgba(255,255,255,.2);
                     border-top:4px solid var(--primary);border-radius:50%;
                     margin:20px auto;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    footer{position:absolute;bottom:10px;font-size:.75rem;opacity:.6;text-align:center;width:100%}
  </style>
</head>
<body>
  <div class="container">
    <div class="logo-orb"></div>
    <h1 class="title">Kubu-Hai Web</h1>
    <p class="subtitle">Empowering Flutter Web with AI, voice, and PWA magic ‚ú®</p>

    <div class="loading-spinner" id="loader"></div>
    <p class="status" id="status">Initializing Flutter engine...</p>

    <button class="btn" onclick="toggleTheme()">Toggle Theme üåó</button>
    <button class="btn" onclick="toggleVoice()">Voice Assistant üéôÔ∏è</button>
  </div>

  <footer>¬© 2025 Kubu-Hai Technologies ‚Ä¢ All Rights Reserved</footer>

  <script>
    function toggleTheme(){document.body.classList.toggle('light')}
    let voiceEnabled=false;
    function toggleVoice(){voiceEnabled=!voiceEnabled;
       alert(voiceEnabled?'üéß Voice Assistant Enabled':'üîá Voice Assistant Disabled')}
    function updateStatus(){
       const s=document.getElementById('status');
       s.textContent=navigator.onLine?'üü¢ Online - Flutter Ready':'üî¥ Offline - Some features unavailable'}
    window.addEventListener('online',updateStatus);
    window.addEventListener('offline',updateStatus);
    window.addEventListener('load',()=>{
      const loader=document.getElementById('loader');
      _flutter.loader.loadEntrypoint({
        onEntrypointLoaded:async e=>{
          const r=await e.initializeEngine();r.runApp();
          loader.style.display='none';
          document.getElementById('status').textContent='‚úÖ Flutter App Loaded Successfully!'
        },
        serviceWorker:{serviceWorkerVersion:serviceWorkerVersion}
      });
      updateStatus();
      if('serviceWorker'in navigator){
        navigator.serviceWorker.register('./service-worker.js')
          .then(r=>console.log('‚úÖ SW registered:',r.scope))
          .catch(err=>console.warn('‚ö†Ô∏è SW registration failed:',err));
      }
    });
  </script>

  <!-- Inline service worker script -->
  <script id="sw-script" type="text/plain">
const CACHE_NAME="kubu-hai-cache-v1";
const OFFLINE_URL="offline.html";
const ASSETS=["./","./index.html","./flutter.js","./icon-192.png","./icon-512.png","./icon-maskable.png"];
self.addEventListener("install",e=>{
  e.waitUntil(caches.open(CACHE_NAME).then(c=>c.addAll(ASSETS)));self.skipWaiting()
});
self.addEventListener("activate",e=>{
  e.waitUntil(caches.keys().then(names=>Promise.all(names.filter(n=>n!==CACHE_NAME).map(n=>caches.delete(n)))));
  self.clients.claim()
});
self.addEventListener("fetch",e=>{
  if(e.request.mode==="navigate"){
    e.respondWith(fetch(e.request).catch(()=>caches.match(OFFLINE_URL)))
  }else{
    e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)))
  }
});
  </script>
</body>
</html>
